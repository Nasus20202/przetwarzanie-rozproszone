sequenceDiagram
    participant Gracz 1
    participant Serwer
    participant Gracz 2

    Gracz 1->>Serwer: Dołączanie do gry
    activate Serwer
    Serwer-->>Gracz 1: Przesłanie informacji o mapie
    deactivate Serwer
    Gracz 2->>Serwer: Dołączanie do gry
    activate Serwer
    Serwer-->>Gracz 2: Przesłanie informacji o mapie
    deactivate Serwer

    Gracz 1->>Serwer: Przesłanie informacji o gotowości
    Gracz 2->>Serwer: Przesłanie informacji o gotowości
    par
        Serwer-->>Gracz 1: Rozpoczęcie gry
        activate Serwer
    and
        Serwer-->>Gracz 2: Rozpoczęcie gry
        deactivate Serwer
    end

    Note over Gracz 1, Gracz 2: Rozgrywka

    loop
        alt Ruch gracza
            Gracz 1->>Serwer: Przesłanie informacji o akcji
            activate Serwer
            Note right of Serwer: Sprawdzenie poprawności akcji
            par
                Serwer-->>Gracz 1: Rozpropagowanie akcji
            and
                Serwer-->>Gracz 2: Rozpropagowanie akcji
                deactivate Serwer
            end
        else Synchronizacja
            par
                Serwer-->>Gracz 1: Przesłanie aktualizacji stanu
                activate Serwer
            and
                Serwer-->>Gracz 2: Przesłanie aktualizacji stanu
                deactivate Serwer
            end
        end
    end

    Note over Gracz 1, Gracz 2: Zakończenie rozgrywki

    par
        Serwer-->>Gracz 1: Przesłanie informacji o końcu gry
        activate Serwer
    and
        Serwer-->>Gracz 2: Przesłanie informacji o końcu gry
        deactivate Serwer
    end

    Gracz 1->>Serwer: Opuszczenie gry
    activate Serwer
    Serwer-->>Gracz 1: Potwierdzenie opuszczenia gry
    deactivate Serwer
    
    Gracz 2->>Serwer: Opuszczenie gry
    activate Serwer
    Serwer-->>Gracz 2: Potwierdzenie opuszczenia gry
    deactivate Serwer

